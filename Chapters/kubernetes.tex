%************************************************
\chapter{Kubernetes}\label{ch:kubernetes}
%************************************************
Topic 3: Write a brief introduction to the Kubernetes container cluster manager. 
Design, develop, test, and document a functional proof-of-concept prototype using the Kubernetes container cluster manager. 

This topic builds on top of the previous two topics 1 and 2 and should be able to:\\
- deploy all containerized services in Kubernetes on the Raspberry Pi cluster \\
- scale pods in Kubernetes \\
- update pods with rolling-update \\

\textbf{What is Kubernetes?}\\
Kubernetes is an open-source container management system developed by Google.
Kubernetes is used for automating management of containers such as scaling, loadbalancing and scheduling containers between nodes in a cluster. Containers are run inside something called a pod.
A pod is a group of containers that are scheduled onto the same host.
Pods are used for gathering containers that are tightly coupled to each other under the same host such communication between containers becomes easier. Every pod has it's own ip address. Kubernetes schedules, deploy and scale pods such they among other ensure that the load is balanced in the cluster. 

The containers in the nodes are replicated, so if one node fails Kubernetes will create a new pod on another node and run the container within this newly created pod. 
If there suddenly comes a lot of load on a specific node it will make extra \emph{replicaset} of the pods so that the load is distributed between these pods and thereby the load is more balanced. 

\section{PoC of Kubernetes}
After having put the services inside of Docker containers on our local machines we need to run them on the clusters. For running these services as Docker containers on the cluster it is necessary to put the service inside a Docker container from the cluster instead of locally. Therefore we build the jar file for the services locally using maven and move the jar file to the cluster. Then we run the Dockerfile on the cluster which puts our service inside a Docker container. When the service is packed inside a Docker container we will push this containerized service to Docker hub. To deploy and run the containerized service inside of Kubernetes on the Raspberry Pi cluster we call a command which deploys the Docker container on Kubernetes. Yaml files are used to descibe pods???? use... yml????.
%results image
Secondly we scale number pods:
%results image

Lastly we update the pods, using rolling-update:
%results image



%profiles - development port and default port
%jar file
%docker hub repository


%\begin{figure}[bth]
%	\includegraphics[width=1\linewidth]{gfx/pastry-routing}
%	\caption[routingtable]{Routing table for Pastry} \label{fig:pastryrouting}
%\end{figure}